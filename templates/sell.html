<!DOCTYPE html>
<html>
<head>
    <title>Item List</title>

<style>
 body {
    background-image: url('/static/images/4.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    margin: 0;
    font-family: Arial, sans-serif;
   }
   #container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
   }

   form {
    display: grid;
    gap: 10px;
   }

   label {
    display: flex;
    align-items: center;
    justify-content: space-between;
   }

   input[type="checkbox"] {
    margin-right: 10px;
   }

   input[type="number"] {
    width: 50px;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
   }

   button[type="submit"] {
    padding: 10px 20px;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
   }

   table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    
   }

   th, td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
   }

   th {
    background-color: #f2f2f2;
   }

   .flash-messages {
    margin-top: 20px;
   }

   .alert {
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
   }

   .alert-success {
    background-color: #D4EDDA;
    color: #155724;
   }

   .alert-danger {
    background-color: #F8D7DA;
    color: #721C24;
   }
   
   .item-wrapper {
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
        margin-bottom: 10px;
    }
</style>


<script>
    function calculate_sell_Total() {
      var totalCostElement = document.getElementById('total-cost');
      var totalCostInput = document.getElementById('total-cost-input');
      var totalCost = parseFloat(totalCostInput.value); 
              var selectedItems = document.querySelectorAll('input[name="selected_item"]:checked');
              var totalCost = 0;
              
              selectedItems.forEach(function(item) {
                  var itemInfo = item.value.split(':');
                  var itemName = itemInfo[0];
                  var itemPrice = parseFloat(itemInfo[1]);
                  var profitPercentage = parseFloat(document.querySelector('input[name="' + itemName + '_profit"]').value);
                  var quantity = parseInt(document.querySelector('input[name="' + itemName + '"]').value);
                  totalCost += (itemPrice + (itemPrice * profitPercentage / 100)) * quantity;
              });
              
              var totalCostElement = document.getElementById('total-cost');
      var totalCostInput = document.getElementById('total-cost-input');
  
      if (totalCost > 0) {
          totalCostElement.textContent = "Total Cost: $" + totalCost.toFixed(2);
          totalCostInput.value = totalCost.toFixed(2);
          totalCostElement.style.display = 'block'; // Show the total cost element
          return true; // Allow form submission
      } else {
          totalCostElement.style.display = 'none'; // Hide the total cost element
          return false; // Prevent form submission
      }
          }
  
          
      </script>

</head>
<body>
    <div id="container">
        <h1>You can Yearn money here</h1>
        <form action="{{ url_for('calculate_sell_total') }}" method="POST" oninput="calculate_sell_Total()">
            <!-- Existing form elements -->
            {% for item in items %}
                <div class="item-wrapper">
                    <label>
                        <input type="checkbox" name="selected_item" value="{{ item.0 }}:{{ item.1 }}">
                        {{ item.0 }} - ₹{{ item.1 }}
                    </label>
                    <input type="number" name="{{ item.0 }}" value="0" min="0">
                    <label>Profit Percentage:</label>
                    <input type="number" name="{{ item.0 }}_profit" value="10" min="0">
                </div>
            {% endfor %}
            <input type="hidden" name="total-cost" id="total-cost-input" value="0"> 
            <button type="submit">Calculate total</button>
        
        
        <p id="total-cost">Total Cost: ₹0.00</p>
        <p id="total-cost-display"></p>
    
        
     
    
       
    </div>
</body>
</html>
